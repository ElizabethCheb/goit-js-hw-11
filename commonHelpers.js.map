{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from 'izitoast';\n\nlet lightbox;\nconst apiKey = '41856148-e541297002e84807a45dae6d1';\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('search-input');\nconst gallery = document.getElementById('gallery');\nlet errorMessageElement = document.getElementById('error-message');\n\nlightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  widthRatio: 0.9,\n  heightRatio: 0.9,\n  scaleImageToRatio: true,\n});\n\ndocument.addEventListener('keydown', handleKeyPress);\nsearchForm.addEventListener('submit', function (event) {\n  event.preventDefault();\n  const searchQuery = searchInput.value.trim();\n  fetchData(searchQuery, apiKey);\n});\n\nfunction handleKeyPress(event) {\n  if (event.key === 'Escape' && lightbox && lightbox.visible) {\n    lightbox.close();\n  }\n}\n\nasync function fetchData(searchQuery, apiKey) {\n  const url = new URL('https://pixabay.com/api/');\n  const params = {\n    key: apiKey,\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true\n  };\n  url.search = new URLSearchParams(params).toString();\n  showLoadingIndicator();\n\n  try {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error('Network response was not ok');\n    }\n    const data = await response.json();\n    hideLoadingIndicator();\n    clearGallery();\n\n    if (data.hits.length === 0) {\n      displayNoResultsMessage();\n    } else {\n      displayImages(data.hits);\n      initializeLightbox(); // Оновлено: ініціалізувати lightbox після додавання зображень\n    }\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    hideLoadingIndicator();\n    displayErrorMessage('An error occurred while fetching data. Please try again.');\n  }\n}\n\nfunction showLoadingIndicator() {\n  const loadingIndicator = createLoadingIndicator();\n  document.body.appendChild(loadingIndicator);\n}\n\nfunction createLoadingIndicator() {\n  const loadingIndicator = document.createElement('div');\n  loadingIndicator.className = 'loading-indicator';\n  loadingIndicator.innerText = 'Loading...';\n  return loadingIndicator;\n}\n\nfunction hideLoadingIndicator() {\n  const loadingIndicator = document.querySelector('.loading-indicator');\n  if (loadingIndicator) {\n    loadingIndicator.remove();\n  }\n}\n\nfunction clearGallery() {\n  gallery.innerHTML = '';\n}\n\nfunction displayNoResultsMessage() {\n  iziToast.error({\n    title: '',\n    message: 'Sorry, there are no images matching your search query. Please, try again!',\n    position: 'topRight',\n    timeout: 5000,\n  });\n}\n\nfunction displayErrorMessage(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n    timeout: 5000,\n  });\n\n  errorMessageElement.textContent = message;\n}\n\nfunction displayImages(images) {\n  const fragment = document.createDocumentFragment();\n  images.forEach(image => {\n    const linkElement = document.createElement('a');\n    linkElement.href = image.largeImageURL;\n    linkElement.classList.add('gallery-link');\n\n    const imgElement = document.createElement('img');\n    imgElement.src = image.webformatURL;\n    imgElement.alt = image.tags;\n    imgElement.style.width = '100%';\n\n    linkElement.appendChild(imgElement);\n    fragment.appendChild(linkElement);\n  });\n  gallery.appendChild(fragment);\n}\n\nfunction initializeLightbox() {\n  lightbox.refresh();\n}\n\ngallery.addEventListener('click', function (event) {\n  if (event.target.tagName === 'IMG' && lightbox) {\n    const galleryImages = document.querySelectorAll('.gallery img');\n    const imageIndex = Array.from(galleryImages).indexOf(event.target);\n    const originalImageUrl = galleryImages[imageIndex].parentNode.href;\n    lightbox.open([{\n      src: originalImageUrl,\n      title: galleryImages[imageIndex].alt\n    }]);\n    lightbox.on('show.simplelightbox', function () {\n      const lightboxImage = lightbox.element().find('.sl-image img');\n      lightboxImage.css({\n        width: '100%',\n        'max-width': 'none',\n        'max-height': 'none'\n      });\n    });\n  }\n});\n"],"names":["lightbox","apiKey","searchForm","searchInput","gallery","errorMessageElement","SimpleLightbox","handleKeyPress","event","searchQuery","fetchData","url","params","showLoadingIndicator","response","data","hideLoadingIndicator","clearGallery","displayNoResultsMessage","displayImages","initializeLightbox","error","displayErrorMessage","loadingIndicator","createLoadingIndicator","iziToast","message","images","fragment","image","linkElement","imgElement","galleryImages","imageIndex","originalImageUrl"],"mappings":"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"}