{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nlet lightbox;\nconst apiKey = '41856148-e541297002e84807a45dae6d1';\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('search-input');\nconst gallery = document.getElementById('gallery');\nsearchForm.addEventListener('submit', function (event) {\n  event.preventDefault();\n  const searchQuery = searchInput.value.trim();\n  fetchData(searchQuery, apiKey);\n});\ndocument.addEventListener('DOMContentLoaded', function () {\n  lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n    widthRatio: 0.9,\n    heightRatio: 0.9,\n    scaleImageToRatio: true,\n  });\n  document.addEventListener('keydown', function (event) {\n    if (event.key === 'Escape' && lightbox && lightbox.visible) {\n      lightbox.close();\n    }\n  });\n});\nfunction fetchData(searchQuery, apiKey) {\n  const url = `https://pixabay.com/api/?key=${apiKey}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true`;\n  showLoadingIndicator();\n  fetch(url)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      return response.json();\n    })\n    .then(data => {\n      hideLoadingIndicator();\n      clearGallery();\n      if (data.hits.length === 0) {\n        displayNoResultsMessage();\n        return;\n      }\n      displayImages(data.hits);\n    })\n    .catch(error => {\n      console.error('Error fetching data:', error);\n      hideLoadingIndicator();\n      displayErrorMessage('An error occurred while fetching data. Please try again.');\n    });\n}\nfunction showLoadingIndicator() {\n  const loadingIndicator = document.querySelector('.loading-indicator');\n  if (!loadingIndicator) {\n    const newLoadingIndicator = document.createElement('div');\n    newLoadingIndicator.className = 'loading-indicator';\n    newLoadingIndicator.innerText = 'Loading...';\n    document.body.appendChild(newLoadingIndicator);\n  }\n}\nfunction hideLoadingIndicator() {\n  const loadingIndicator = document.querySelector('.loading-indicator');\n  if (loadingIndicator) {\n    loadingIndicator.remove();\n  }\n}\nfunction clearGallery() {\n  gallery.innerHTML = '';\n}\nfunction displayNoResultsMessage() {\n  const toastContainer = document.createElement('div');\n  toastContainer.className = 'toast-container';\n  const decorativeIcon = document.createElement('span');\n  decorativeIcon.className = 'decorative-icon';\n  decorativeIcon.innerHTML = '&#9737;';\n  const errorMessage = document.createElement('p');\n  errorMessage.innerText = 'Sorry, there are no images matching your search query. Please, try again!';\n  const closeButton = document.createElement('span');\n  closeButton.className = 'close-button';\n  closeButton.innerHTML = '&times;';\n  toastContainer.appendChild(decorativeIcon);\n  toastContainer.appendChild(errorMessage);\n  toastContainer.appendChild(closeButton);\n  document.body.appendChild(toastContainer);\n  closeButton.addEventListener('click', () => {\n    toastContainer.remove();\n  });\n}\nfunction displayImages(images) {\n  const fragment = document.createDocumentFragment();\n  images.forEach(image => {\n    const linkElement = document.createElement('a');\n    linkElement.href = image.webformatURL;\n    linkElement.classList.add('gallery-link');\n    const imgElement = document.createElement('img');\n    imgElement.src = image.webformatURL;\n    imgElement.alt = image.tags;\n    imgElement.style.width = '1112px';\n    imgElement.style.height = '640px';\n    linkElement.style.width = 'calc((100% - 32px) / 3)';\n    linkElement.style.height = 'auto';\n    imgElement.style.width = '100%';\n    imgElement.style.height = '100%';\n    linkElement.style.marginBottom = '16px';\n    linkElement.style.display = 'block';\n    linkElement.appendChild(imgElement);\n    fragment.appendChild(linkElement);\n  });\n  gallery.appendChild(fragment);\n  lightbox.refresh();\n}\ngallery.addEventListener('click', function (event) {\n  if (event.target.tagName === 'IMG' && lightbox) {\n    const galleryImages = document.querySelectorAll('.gallery img');\n    const imageIndex = Array.from(galleryImages).indexOf(event.target);\n    const originalImageUrl = galleryImages[imageIndex].parentNode.href;\n    lightbox.open([{\n      src: originalImageUrl,\n      title: galleryImages[imageIndex].alt\n    }]);\n    lightbox.on('show.simplelightbox', function () {\n      const lightboxImage = lightbox.element().find('.sl-image img');\n      lightboxImage.css({\n        width: '1112px',\n        height: '640px',\n        'max-width': 'none',\n        'max-height': 'none'\n      });\n    });\n  }\n});\n"],"names":["lightbox","apiKey","searchForm","searchInput","gallery","event","searchQuery","fetchData","SimpleLightbox","url","showLoadingIndicator","response","data","hideLoadingIndicator","clearGallery","displayNoResultsMessage","displayImages","error","newLoadingIndicator","loadingIndicator","toastContainer","decorativeIcon","errorMessage","closeButton","images","fragment","image","linkElement","imgElement","galleryImages","imageIndex","originalImageUrl"],"mappings":"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"}